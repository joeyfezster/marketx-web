(this["webpackJsonpmarketx-web"]=this["webpackJsonpmarketx-web"]||[]).push([[0],{117:function(e,a,n){"use strict";n.r(a);var r,t=n(0),s=n.n(t),o=n(11),i=n.n(o),c=(n(89),n(31)),u=n(26),l=n(15),d=n(70),m=n(8),p=function(){return Object(m.jsx)(u.b,{to:"signin",children:"Sign in"})},E={ROOT:"/",SIGNIN:"/signin",SIGNUP:"/signup"};!function(e){e.LOGIN_USER="LOGIN_USER",e.LOGIN_USER_PENDING="LOGIN_USER_PENDING",e.LOGIN_USER_FULFILLED="LOGIN_USER_FULFILLED",e.LOGIN_USER_REJECTED="LOGIN_USER_REJECTED",e.REGISTER_USER="REGISTER_USER",e.REGISTER_USER_PENDING="REGISTER_USER_PENDING",e.REGISTER_USER_FULFILLED="REGISTER_USER_FULFILLED",e.REGISTER_USER_REJECTED="REGISTER_USER_REJECTED"}(r||(r={}));var f=n(39),j=n(147),b=n(149),R=n(151),g=n(150),O=n(146),S=Object(g.a)((function(e){return Object(O.a)({root:{},form:{display:"flex",flexDirection:"column",maxWidth:"400px",margin:"auto"},formHeader:{display:"flex",justifyContent:"center"},formItem:{marginTop:"15px"}})})),I=Object(f.b)({mapPropsToValues:function(){return{email:"",password:""}},validate:function(e){var a={};return e.email||(a.email="Required"),e.password||(a.password="Required"),a},handleSubmit:function(e,a){var n=a.setSubmitting,r=a.props;r.onSubmit({data:{identifier:e.email,password:e.password},onSuccess:function(){r.onSuccess(),n(!1)}})},displayName:"SigninForm"})((function(e){var a=e.setFieldValue,n=S();return Object(m.jsxs)(f.a,{className:n.form,children:[Object(m.jsx)("div",{className:n.formHeader,children:Object(m.jsx)(j.a,{variant:"h5",children:"Sign in"})}),Object(m.jsx)(b.a,{className:n.formItem,required:!0,name:"email",label:"Email Address",defaultValue:"",variant:"outlined",onChange:function(e){a("email",e.target.value,!1)}}),Object(m.jsx)(b.a,{className:n.formItem,required:!0,name:"password",label:"Password",defaultValue:"",variant:"outlined",onChange:function(e){a("password",e.target.value,!1)}}),Object(m.jsx)(R.a,{className:n.formItem,type:"submit",variant:"contained",color:"primary",children:"SIGN IN"}),Object(m.jsx)(u.b,{className:n.formItem,to:"/signup",children:"Don't have an account? Sign up"})]})})),v=function(){var e=S(),a=Object(c.b)(),n=Object(l.f)();return Object(m.jsx)("div",{className:e.root,children:Object(m.jsx)(I,{onSubmit:function(e){a(function(e){return{type:r.LOGIN_USER,payload:e}}(e))},onSuccess:function(){n.push(E.ROOT)}})})},x=Object(f.b)({mapPropsToValues:function(){return{name:"",username:"",email:"",password:"",confirmPassword:""}},validate:function(e){var a={};return e.name||(a.name="Required"),e.username||(a.username="Required"),e.email||(a.email="Required"),e.password||(a.password="Required"),e.confirmPassword||(a.confirmPassword="Required"),a},handleSubmit:function(e,a){var n=a.setSubmitting,r=a.props;r.onSubmit({data:{name:e.name,username:e.username,email:e.email,password:e.password},onSuccess:function(){r.onSuccess(),n(!1)}})},displayName:"SignupForm"})((function(e){var a=e.setFieldValue,n=S();return Object(m.jsxs)(f.a,{className:n.form,children:[Object(m.jsx)("div",{className:n.formHeader,children:Object(m.jsx)(j.a,{variant:"h5",children:"Register"})}),Object(m.jsx)(b.a,{className:n.formItem,required:!0,name:"name",label:"Name",defaultValue:"",variant:"outlined",onChange:function(e){a("name",e.target.value,!1)}}),Object(m.jsx)(b.a,{className:n.formItem,required:!0,name:"username",label:"Username",defaultValue:"",variant:"outlined",onChange:function(e){a("username",e.target.value,!1)}}),Object(m.jsx)(b.a,{className:n.formItem,required:!0,name:"email",label:"Email Address",defaultValue:"",variant:"outlined",onChange:function(e){a("email",e.target.value,!1)}}),Object(m.jsx)(b.a,{type:"password",className:n.formItem,required:!0,name:"password",label:"Password",defaultValue:"",variant:"outlined",onChange:function(e){a("password",e.target.value,!1)}}),Object(m.jsx)(b.a,{type:"password",className:n.formItem,required:!0,name:"confirmPassword",label:"Confirm Password",defaultValue:"",variant:"outlined",onChange:function(e){a("confirmPassword",e.target.value,!1)}}),Object(m.jsx)(R.a,{className:n.formItem,type:"submit",variant:"contained",color:"primary",children:"SIGN UP"}),Object(m.jsx)(u.b,{className:n.formItem,to:"/signin",children:"Already have an account? Sign in"})]})})),N=function(){var e=Object(c.b)(),a=Object(l.f)(),n=S();return Object(m.jsx)("div",{className:n.root,children:Object(m.jsx)(x,{onSubmit:function(a){e(function(e){return{type:r.REGISTER_USER,payload:e}}(a))},onSuccess:function(){a.push(E.ROOT)}})})},h=n(20),L=n(76),_=n(73),U=n(58),w=n(74),G=n.n(w),y=n(21),T=n.n(y),D=n(19),F="jwt",P=function(e){localStorage.setItem(F,e)},k=n(57),C=n.n(k),q="https://marketx-backend-joey.herokuapp.com",V={LOGIN:"".concat(q,"/auth/local"),REGISTER:"".concat(q,"/auth/local/register")},J=function(e,a){return C.a.post(V.LOGIN,{identifier:e,password:a})},A=function(e){return C.a.post(V.REGISTER,e)},H=T.a.mark(K),B=T.a.mark(Q),M=T.a.mark(X),W=T.a.mark(Y),z=T.a.mark(Z);function K(e){var a,n,t,s,o,i,c,u,l,d,m,p;return T.a.wrap((function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,Object(D.d)({type:r.LOGIN_USER_PENDING});case 2:return E.prev=2,E.next=5,Object(D.b)(J,null===(a=e.payload)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.identifier,null===(t=e.payload)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.password);case 5:return o=E.sent,P(o.data.jwt),E.next=9,Object(D.d)({type:r.LOGIN_USER_FULFILLED,data:o.data.user});case 9:e.payload.onSuccess&&e.payload.onSuccess(),E.next=19;break;case 12:return E.prev=12,E.t0=E.catch(2),u=null===(i=E.t0.response)||void 0===i||null===(c=i.data)||void 0===c?void 0:c.message,Array.isArray(u)&&(u=null===(l=E.t0.response)||void 0===l||null===(d=l.data)||void 0===d||null===(m=d.message[0])||void 0===m||null===(p=m.messages[0])||void 0===p?void 0:p.message),E.next=18,Object(D.d)({type:r.LOGIN_USER_REJECTED,error:u});case 18:e.payload.onError&&e.payload.onError(u);case 19:case"end":return E.stop()}}),H,null,[[2,12]])}function Q(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.e)(r.LOGIN_USER,K);case 2:case"end":return e.stop()}}),B)}function X(e){var a,n,t,s,o,i,c,u,l;return T.a.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,Object(D.d)({type:r.REGISTER_USER_PENDING});case 2:return d.prev=2,d.next=5,Object(D.b)(A,null===(a=e.payload)||void 0===a?void 0:a.data);case 5:return n=d.sent,d.next=8,Object(D.d)({type:r.REGISTER_USER_FULFILLED,data:n.data.user});case 8:P(n.data.jwt),e.payload.onSuccess&&e.payload.onSuccess(),d.next=19;break;case 12:return d.prev=12,d.t0=d.catch(2),o=null===(t=d.t0.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message,Array.isArray(o)&&(o=null===(i=d.t0.response)||void 0===i||null===(c=i.data)||void 0===c||null===(u=c.message[0])||void 0===u||null===(l=u.messages[0])||void 0===l?void 0:l.message),d.next=18,Object(D.d)({type:r.REGISTER_USER_REJECTED,error:o});case 18:e.payload.onError&&e.payload.onError(o);case 19:case"end":return d.stop()}}),M,null,[[2,12]])}function Y(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.e)(r.REGISTER_USER,X);case 2:case"end":return e.stop()}}),W)}function Z(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.a)([Q(),Y()]);case 2:case"end":return e.stop()}}),z)}var $=T.a.mark(ee);function ee(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.a)([Object(D.c)(Z)]);case 2:case"end":return e.stop()}}),$)}var ae=n(75),ne=Object(ae.a)((function(e,a){switch(a.type){case r.LOGIN_USER_PENDING:e.userLogin.pending=!0,e.userLogin.fulfilled=!1,e.userLogin.rejected=!1,e.userLogin.error="",e.loggedInUser.data=null;break;case r.LOGIN_USER_FULFILLED:e.userLogin.pending=!1,e.userLogin.fulfilled=!0,e.userLogin.rejected=!1,e.userLogin.error="",e.loggedInUser.data=a.data;break;case r.LOGIN_USER_REJECTED:e.userLogin.pending=!1,e.userLogin.fulfilled=!1,e.userLogin.rejected=!0,e.userLogin.error=a.error,e.loggedInUser.data=null;break;case r.REGISTER_USER_PENDING:e.userRegistration.pending=!0,e.userRegistration.fulfilled=!1,e.userRegistration.rejected=!1,e.userRegistration.error="",e.loggedInUser.data=null;break;case r.REGISTER_USER_FULFILLED:e.userRegistration.pending=!1,e.userRegistration.fulfilled=!0,e.userRegistration.rejected=!1,e.userRegistration.error="",e.loggedInUser.data=a.data;break;case r.REGISTER_USER_REJECTED:e.userRegistration.pending=!1,e.userRegistration.fulfilled=!1,e.userRegistration.rejected=!0,e.userRegistration.error=a.error,e.loggedInUser.data=null}}),{loggedInUser:{data:null},userLogin:{pending:!1,fulfilled:!1,rejected:!1,error:""},userRegistration:{pending:!1,fulfilled:!1,rejected:!1,error:""}}),re=Object(h.combineReducers)({authState:ne}),te={key:"root",storage:G.a,whitelist:[]},se=Object(L.a)(),oe=Object(h.applyMiddleware)(se),ie=Object(_.composeWithDevTools)(oe),ce=Object(U.a)(te,re),ue=Object(h.createStore)(ce,ie),le=Object(U.b)(ue);se.run(ee);var de=function(){return Object(m.jsx)(c.a,{store:ue,children:Object(m.jsx)(d.a,{loading:null,persistor:le,children:Object(m.jsx)(u.a,{children:Object(m.jsxs)(l.c,{children:[Object(m.jsx)(l.a,{path:"/",exact:!0,component:p}),Object(m.jsx)(l.a,{path:"/signin",exact:!0,component:v}),Object(m.jsx)(l.a,{path:"/signup",exact:!0,component:N})]})})})})},me=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,153)).then((function(a){var n=a.getCLS,r=a.getFID,t=a.getFCP,s=a.getLCP,o=a.getTTFB;n(e),r(e),t(e),s(e),o(e)}))};i.a.render(Object(m.jsx)(s.a.StrictMode,{children:Object(m.jsx)(de,{})}),document.getElementById("root")),me()},89:function(e,a,n){}},[[117,1,2]]]);
//# sourceMappingURL=main.5a34f448.chunk.js.map